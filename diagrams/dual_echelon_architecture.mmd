%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#1a365d', 'primaryTextColor': '#fff', 'primaryBorderColor': '#2c5282', 'lineColor': '#4a5568', 'secondaryColor': '#2d3748', 'tertiaryColor': '#edf2f7', 'fontFamily': 'Arial, sans-serif'}}}%%
flowchart TB
    subgraph title[" "]
        direction TB
        T["FURIENTIS DUAL-ECHELON ARCHITECTURE"]
    end

    subgraph gov["GOVERNMENT ECHELON (CUI Environment)"]
        direction TB
        subgraph govcloud["AWS GovCloud"]
            EC2G["EC2 (GPU/CPU)"]
            S3G["S3 (Encrypted)"]
            SAGE["SageMaker"]
            BEDR["Bedrock AI"]
        end

        subgraph gcc["M365 GCC High"]
            EXCH["Exchange Online"]
            SPG["SharePoint (CUI)"]
            TEAMSG["Teams"]
        end

        subgraph endpoints["Managed Endpoints"]
            FIPS["FIPS Encryption"]
            EDR["EDR/DLP Agents"]
            MDM["MDM Enrolled"]
        end
    end

    subgraph comm["COMMERCIAL ECHELON (Non-CUI Environment)"]
        direction TB
        subgraph awscomm["AWS Commercial"]
            EC2C["EC2 Instances"]
            S3C["S3 Storage"]
            STDC["Standard Services"]
        end

        subgraph m365comm["M365 Commercial"]
            EMAILC["Email"]
            SPC["SharePoint"]
            TEAMSC["Teams"]
        end

        subgraph byod["BYOD Permitted"]
            STDSEC["Standard Security"]
        end
    end

    subgraph boundary["ENCLAVE BOUNDARY"]
        direction LR
        FW["Firewall (Block)"]
        NOTRAF["No Direct Traffic"]
        DLPM["DLP Monitoring"]
        AUDIT["Audit Logging"]
    end

    gov <--> boundary
    comm <--> boundary

    style title fill:none,stroke:none
    style T fill:#1a365d,stroke:#2c5282,color:#fff,font-weight:bold,font-size:18px
    style gov fill:#1e3a5f,stroke:#2c5282,color:#fff
    style comm fill:#2d3748,stroke:#4a5568,color:#fff
    style boundary fill:#c53030,stroke:#9b2c2c,color:#fff
    style govcloud fill:#2b6cb0,stroke:#2c5282,color:#fff
    style gcc fill:#2b6cb0,stroke:#2c5282,color:#fff
    style endpoints fill:#2b6cb0,stroke:#2c5282,color:#fff
    style awscomm fill:#4a5568,stroke:#2d3748,color:#fff
    style m365comm fill:#4a5568,stroke:#2d3748,color:#fff
    style byod fill:#4a5568,stroke:#2d3748,color:#fff
